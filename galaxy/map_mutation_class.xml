<tool id="pancancer_map_mutation_class" name="PAPAA: PanCancer map mutation class" version="@VERSION@">
  <description>map mutation class</description>
  <macros>
    <import>macros.xml</import>
  </macros>
  <expand macro="requirements"/>
  <expand macro="stdio"/>
  <version_command><![CDATA['papaa_map_mutation_class.py' --version]]></version_command>
  <command><![CDATA[
      mkdir 'classifier' &&
      ln -s '${scores}' 'classifier/classifier_decisions.tsv' && 
      papaa_map_mutation_class.py
      --scores 'classifier'
      #if $path_genes and str($path_genes):
      --path_genes '$path_genes'
      #end if
      @INPUTS_COPY_NUMBER_FILE_CONDITIONAL@
      @INPUT_FILENAME_RAW_MUT@
      > '${log}'
    ]]> 
  </command>
  <inputs>
    <param argument="--scores" label="pancancer decisions" name="scores" optional="false" type="data" format="tabular" help="classifier_decisions.tsv"/>
    <param argument="--path_genes" label="string of the genes to extract or genelist file" name="path_genes" optional="true" type= "data" value="PIK3CA,PIK3CB,PIK3R2,AKT1,AKT2,AKT3,RHEB,RPTOR,RICTOR,MTOR,ERBB2,KRAS,HRAS,NRAS,NFE2L2,PTEN,PIK3R1,PIK3R3,INPP4B,STK11,PPP2R1A,TSC1,TSC2,NF1" />
    <expand macro="inputs_copy_number_file_conditional" />
    <expand macro="input_filename_raw_mut" />
  </inputs>
  <outputs>
    <data format="txt" name="log" label="${tool.name} on ${on_string} (Log)"/>
    <data format="tabular" name="mutation_classification_scores" label="${tool.name} on ${on_string} (mutation_classification_scores.tsv)" from_work_dir="classifier/tables/mutation_classification_scores.tsv"/>
  </outputs>
  <help><![CDATA[

    Pancancer_Aberrant_Pathway_Activity_Analysis scripts/map_mutation_class.py:

      --scores              String of the location of folder containing classifier_decisions.tsv
      --path_genes          comma separated string of HUGO symbols for all genes in the pathway or Pathway genes list file
      --filename_copy_loss  Filename of copy number loss
      --filename_copy_gain  Filename of copy number gain
      --filename_raw_mut    Filename of raw mut MAF
        
      Output:
      - Merge per sample classifier scores with mutation types present in each sample and generate "mutation_classification_scores.tsv" file

      ]]></help>
</tool>